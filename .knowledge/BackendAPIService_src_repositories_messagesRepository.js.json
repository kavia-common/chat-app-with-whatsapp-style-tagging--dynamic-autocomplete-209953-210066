{"is_source_file": true, "format": "JavaScript", "description": "This file contains repository functions for managing messages and tags in a chat application, including listing, creating, updating, and deleting messages, with support for message tagging and mapping database rows to API message objects.", "external_files": ["../db/pool"], "external_methods": ["query"], "published": ["listMessages", "createMessage", "updateMessage", "deleteMessage"], "classes": [], "methods": [{"name": "mapDbMessageToApi(row, tags = [])", "description": "Maps a database message row and optional tags into an API message object.", "scope": "", "scopeKind": ""}, {"name": "getMessageTags(messageId)", "description": "Fetches tags associated with a specific message.", "scope": "", "scopeKind": ""}, {"name": "listMessages({ page = 1, limit = 20 } = {})", "description": "Retrieves a paginated list of messages with their tags.", "scope": "", "scopeKind": ""}, {"name": "createMessage({ senderId, text, tags = [], status = 'sent' })", "description": "Creates a new message, attaches tags (creating new tags as needed), and returns the message object.", "scope": "", "scopeKind": ""}, {"name": "updateMessage(id, { text, tags = [] })", "description": "Updates the content and tags of an existing message.", "scope": "", "scopeKind": ""}, {"name": "deleteMessage(id)", "description": "Deletes a message by its ID.", "scope": "", "scopeKind": ""}], "calls": ["query", "getMessageTags", "mapDbMessageToApi"], "search-terms": ["messagesRepository", "listMessages", "createMessage", "updateMessage", "deleteMessage", "MessageTag", "Tag", "Message"], "state": 2, "file_id": 16, "knowledge_revision": 70, "git_revision": "", "revision_history": [{"33": ""}, {"54": ""}, {"55": ""}, {"56": ""}, {"57": ""}, {"58": ""}, {"62": ""}, {"63": ""}, {"64": ""}, {"65": ""}, {"66": ""}, {"70": ""}], "ctags": [{"_type": "tag", "name": "createMessage", "path": "/home/kavia/workspace/code-generation/chat-app-with-whatsapp-style-tagging--dynamic-autocomplete-209953-210066/BackendAPIService/src/repositories/messagesRepository.js", "pattern": "/^async function createMessage({ senderId, text, tags = [], status = 'sent' }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ senderId, text, tags = [], status = 'sent' })"}, {"_type": "tag", "name": "deleteMessage", "path": "/home/kavia/workspace/code-generation/chat-app-with-whatsapp-style-tagging--dynamic-autocomplete-209953-210066/BackendAPIService/src/repositories/messagesRepository.js", "pattern": "/^async function deleteMessage(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getMessageTags", "path": "/home/kavia/workspace/code-generation/chat-app-with-whatsapp-style-tagging--dynamic-autocomplete-209953-210066/BackendAPIService/src/repositories/messagesRepository.js", "pattern": "/^async function getMessageTags(messageId) {$/", "language": "JavaScript", "kind": "function", "signature": "(messageId)"}, {"_type": "tag", "name": "listMessages", "path": "/home/kavia/workspace/code-generation/chat-app-with-whatsapp-style-tagging--dynamic-autocomplete-209953-210066/BackendAPIService/src/repositories/messagesRepository.js", "pattern": "/^  listMessages,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "listMessages", "path": "/home/kavia/workspace/code-generation/chat-app-with-whatsapp-style-tagging--dynamic-autocomplete-209953-210066/BackendAPIService/src/repositories/messagesRepository.js", "pattern": "/^async function listMessages({ page = 1, limit = 20 } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ page = 1, limit = 20 } = {})"}, {"_type": "tag", "name": "mapDbMessageToApi", "path": "/home/kavia/workspace/code-generation/chat-app-with-whatsapp-style-tagging--dynamic-autocomplete-209953-210066/BackendAPIService/src/repositories/messagesRepository.js", "pattern": "/^function mapDbMessageToApi(row, tags = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(row, tags = [])"}, {"_type": "tag", "name": "updateMessage", "path": "/home/kavia/workspace/code-generation/chat-app-with-whatsapp-style-tagging--dynamic-autocomplete-209953-210066/BackendAPIService/src/repositories/messagesRepository.js", "pattern": "/^async function updateMessage(id, { text, tags = [] }) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, { text, tags = [] })"}], "hash": "0fe45fd139792b6355790038f358eda8", "format-version": 4, "code-base-name": "BackendAPIService", "filename": "BackendAPIService/src/repositories/messagesRepository.js", "fields": [{"name": "listMessages,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}